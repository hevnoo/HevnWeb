(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-382aafa2"],{"5ea5":function(a,e,t){},"7dc6":function(a,e,t){"use strict";t("5ea5")},"90ab":function(a,e,t){"use strict";t.r(e);var n=function(){var a=this,e=a._self._c;return e("div",{staticClass:"wrapper"},[e("div",{staticClass:"content"},[e("el-form",{ref:"form",attrs:{model:a.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"昵称："}},[e("el-input",{staticClass:"nickname",model:{value:a.form.nickname,callback:function(e){a.$set(a.form,"nickname",e)},expression:"form.nickname"}})],1),e("el-form-item",{attrs:{label:"头像："}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://127.0.0.1:3000/api/user/upload","show-file-list":!1,"on-success":a.handleAvatarSuccess,"before-upload":a.beforeAvatarUpload,name:"head_img"}},[e("img",{staticClass:"avatar",attrs:{src:null!=a.imageUrl?a.imageUrl:a.imgDefault}})]),e("p",{staticClass:"tips"},[a._v("tips:请上传2M以内JPG/PNG格式的图片，比例最好1:1")])],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:a.save}},[a._v("保存")]),e("el-button",{on:{click:a.signOut}},[a._v("退出登录")])],1)],1)],1)])},s=[],i=t("cf05"),o=t.n(i),r=t("a78e"),c=t.n(r),l={name:"Personal",data:function(){return{form:{nickname:this.nickname},imageUrl:null,imgDefault:o.a}},methods:{save:function(){var a=this;this.$axios.post("/api/user/updateUser",{nickname:this.form.nickname,head_img:this.imageUrl}).then((function(e){console.log(e),0===e.data.code&&(a.$message({message:"更新成功",type:"success"}),setTimeout((function(){location.reload()}),1500))})).catch((function(a){console.log(a)}))},handleAvatarSuccess:function(a){this.imageUrl=a.data},beforeAvatarUpload:function(a){var e="image/jpeg"===a.type,t=a.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),t||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&t},getUserInfo:function(){var a=this;this.$axios.get("/api/user/info").then((function(e){var t=e.data;0===t.code&&(a.form.nickname=t.data.nickname,""===t.data.head_img||null===t.data.head_img?a.imageUrl=null:a.imageUrl=t.data.head_img)})).catch((function(a){console.log(a)}))},signOut:function(){c.a.remove("token"),this.$store.commit("tokens/SETTOKEN",""),this.$store.commit("tokens/ISSIGNIN",0),this.$router.push({name:"home"})}},created:function(){this.getUserInfo()}},m=l,u=(t("7dc6"),t("2877")),f=Object(u["a"])(m,n,s,!1,null,"053b8862",null);e["default"]=f.exports},cf05:function(a,e,t){a.exports=t.p+"img/logo.82b9c7a5.png"}}]);
//# sourceMappingURL=chunk-382aafa2.1c2170e5.js.map