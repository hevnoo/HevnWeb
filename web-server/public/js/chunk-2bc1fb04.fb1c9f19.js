(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2bc1fb04"],{"04d0":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"edit_wrap wrapper"},[e("div",{staticClass:"backBtn"},[e("el-button",{on:{click:t.goBack}},[t._v("返回")])],1),e("header",{staticClass:"header"},[e("h1",{staticClass:"edit_title"},[t._v("文章标题：")]),e("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.title,callback:function(a){t.title=a},expression:"title"}})],1),e("div",{staticClass:"label"},[e("span",{staticClass:"_label"},[t._v("文章标签：")]),e("el-select",{attrs:{multiple:"",placeholder:"请选择标签","multiple-limit":4},model:{value:t.labelValue,callback:function(a){t.labelValue=a},expression:"labelValue"}},t._l(t.options,(function(t){return e("el-option",{key:t.id,attrs:{value:t.label}})})),1)],1),e("footer",{staticClass:"footer"},[e("div",{staticClass:"left"},[t._v("封面图片：")]),e("div",{staticClass:"right"},[e("el-upload",{attrs:{action:"http://127.0.0.1:3000/api/article/upImg","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"on-success":t.handleAvatarSuccess,name:"img"}},[e("i",{staticClass:"el-icon-plus"})]),e("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(a){t.dialogVisible=a}}},[e("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),e("p",{staticClass:"tips"},[t._v("tips:优质的封面有利于推荐")])],1)]),e("div",{staticClass:"content"},[t._v("文章内容：")]),e("div",{staticClass:"markdown"},[e("mavon-editor",{staticClass:"mavon",model:{value:t.content,callback:function(a){t.content=a},expression:"content"}})],1),e("div",{staticClass:"save_btn"},[e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)])},l=[],s=(e("d3b7"),e("25f0"),e("14d9"),e("d81d"),{name:"ArticleEdit",data:function(){return{title:"",content:"",options:[],labelValue:[],label_id:[],dialogImageUrl:"",dialogVisible:!1}},methods:{handleAvatarSuccess:function(t){this.dialogImageUrl=t.data},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleRemove:function(t,a){console.log(t,a)},goBack:function(){this.$router.go(-1)},save:function(){var t=this;if(""==this.labelValue||""==this.title||""==this.content)alert("请确保标题、标签和内容不能为空");else if(this.$route.params.id){var a=this.labelValue.toString();this.$axios.post("/api/article/update",{title:this.title,content:this.content,label:a,article_id:this.$route.params.id,img:this.dialogImageUrl}).then((function(a){0===a.data.code&&(t.$message({message:"更新成功",type:"success"}),setTimeout((function(){t.$router.push({name:"article"})}),1e3))})).catch((function(t){console.log(t)}))}else{var e=this.labelValue.toString();this.$axios.post("/api/article/add",{title:this.title,content:this.content,label:e,img:this.dialogImageUrl}).then((function(a){0===a.data.code&&(t.$message({message:"新增成功",type:"success"}),setTimeout((function(){t.$router.push({name:"article"})}),1e3))})).catch((function(t){console.log(t)}))}},getDetail:function(){var t=this;this.$axios.get("/api/article/detail",{params:{article_id:this.$route.params.id}}).then((function(a){0===a.data.code&&(t.title=a.data.data.title,t.content=a.data.data.content,t.dialogImageUrl=a.data.data.img,t.labelValue=a.data.data.label.split(","))})).catch((function(t){console.log(t)}))},getLabel:function(){var t=this;this.$axios.get("/api/label/allLabel").then((function(a){var e=a.data.data;e.map((function(a){t.options.push(a)}))})).catch((function(t){console.log(t)}))}},created:function(){this.getLabel(),this.$route.params.id&&this.getDetail()}}),n=s,o=(e("a95c"),e("2877")),c=Object(o["a"])(n,i,l,!1,null,"59a764a2",null);a["default"]=c.exports},"25f0":function(t,a,e){"use strict";var i=e("5e77").PROPER,l=e("cb2d"),s=e("825a"),n=e("577e"),o=e("d039"),c=e("90d8"),r="toString",d=RegExp.prototype,u=d[r],p=o((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),h=i&&u.name!=r;(p||h)&&l(RegExp.prototype,r,(function(){var t=s(this),a=n(t.source),e=n(c(t));return"/"+a+"/"+e}),{unsafe:!0})},"90d8":function(t,a,e){var i=e("c65b"),l=e("1a2d"),s=e("3a9b"),n=e("ad6d"),o=RegExp.prototype;t.exports=function(t){var a=t.flags;return void 0!==a||"flags"in o||l(t,"flags")||!s(o,t)?a:i(n,t)}},"9f9a":function(t,a,e){},a95c:function(t,a,e){"use strict";var i=e("9f9a"),l=e.n(i);l.a},d81d:function(t,a,e){"use strict";var i=e("23e7"),l=e("b727").map,s=e("1dde"),n=s("map");i({target:"Array",proto:!0,forced:!n},{map:function(t){return l(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-2bc1fb04.fb1c9f19.js.map