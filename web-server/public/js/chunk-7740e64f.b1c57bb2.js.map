{"version":3,"sources":["webpack:///./src/views/Personal.vue?f1e8","webpack:///./src/views/Personal.vue?923b","webpack:///src/views/Personal.vue","webpack:///./src/views/Personal.vue?05cc","webpack:///./src/views/Personal.vue","webpack:///./src/assets/logo.jpg"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","form","model","value","callback","$$v","$set","expression","handleAvatarSuccess","beforeAvatarUpload","directives","name","rawName","imageUrl","imgDefault","_v","on","$event","save","signOut","staticRenderFns","data","nickname","methods","upUserList","head_img","message","type","setTimeout","location","console","getUserInfo","Cookie","created","component","module","exports"],"mappings":"gHAAA,yBAAqiB,EAAG,G,2CCAxiB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,UAAU,CAACG,IAAI,OAAOC,MAAM,CAAC,MAAQR,EAAIS,KAAK,cAAc,SAAS,CAACL,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,QAAQ,CAACJ,EAAG,WAAW,CAACE,YAAY,WAAWI,MAAM,CAACC,MAAOX,EAAIS,KAAa,SAAEG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIS,KAAM,WAAYI,IAAME,WAAW,oBAAoB,GAAGX,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,QAAQ,CAACJ,EAAG,YAAY,CAACE,YAAY,kBAAkBE,MAAM,CAAC,OAAS,wCAAwC,kBAAiB,EAAM,aAAaR,EAAIgB,oBAAoB,gBAAgBhB,EAAIiB,mBAAmB,KAAO,aAAa,CAACb,EAAG,MAAM,CAACc,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAST,MAAqB,MAAdX,EAAIqB,SAAerB,EAAIqB,SAASrB,EAAIsB,WAAYP,WAAW,uCAAuCT,YAAY,aAAaF,EAAG,IAAI,CAACE,YAAY,QAAQ,CAACN,EAAIuB,GAAG,uCAAuC,GAAGnB,EAAG,eAAe,CAACA,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,WAAWgB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAI0B,UAAU,CAAC1B,EAAIuB,GAAG,QAAQnB,EAAG,YAAY,CAACoB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAI2B,aAAa,CAAC3B,EAAIuB,GAAG,WAAW,IAAI,IAAI,MACtqCK,EAAkB,G,sDCgCtB,GACAT,gBACAU,gBACA,OACApB,MACAqB,wBAEAT,cACAC,iBAIAS,SAEAC,sBACA,6CACAF,4BACAG,0BAIAP,gBAAA,WACA,yCACAI,4BACAG,yBACA,kBACA,eACA,kBACA,YACAC,eACAC,iBAEAC,uBACAC,oBACA,SAEA,mBACAC,mBAGAtB,gCACA,sBAEAC,+BACA,4BACA,qBAQA,OANA,GACA,yCAEA,GACA,yCAEA,MAGAsB,uBAAA,WACA,oDACA,aACA,aACA,gCACA,6CACA,gBAGA,+BAGA,mBACAD,mBAIAX,mBACAa,oBAGA,yCACA,wCACA,mBACArB,gBAIAsB,mBACA,qBCtHkV,I,wBCQ9UC,EAAY,eACd,EACA3C,EACA6B,GACA,EACA,KACA,WACA,MAIa,aAAAc,E,4BCnBfC,EAAOC,QAAU,umI","file":"js/chunk-7740e64f.b1c57bb2.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Personal.vue?vue&type=style&index=0&id=c972ef18&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Personal.vue?vue&type=style&index=0&id=c972ef18&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper\"},[_c('div',{staticClass:\"content\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"昵称：\"}},[_c('el-input',{staticClass:\"nickname\",model:{value:(_vm.form.nickname),callback:function ($$v) {_vm.$set(_vm.form, \"nickname\", $$v)},expression:\"form.nickname\"}})],1),_c('el-form-item',{attrs:{\"label\":\"头像：\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"http://127.0.0.1:3000/api/user/upload\",\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload,\"name\":\"head_img\"}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(_vm.imageUrl!=null?_vm.imageUrl:_vm.imgDefault),expression:\"imageUrl!=null?imageUrl:imgDefault\"}],staticClass:\"avatar\"})]),_c('p',{staticClass:\"tips\"},[_vm._v(\"tips:请上传2M以内JPG/PNG格式的图片，比例最好1:1\")])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.save()}}},[_vm._v(\"保存\")]),_c('el-button',{on:{\"click\":function($event){return _vm.signOut()}}},[_vm._v(\"退出登录\")])],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"wrapper\">\r\n        <div class=\"content\">\r\n            <el-form :model=\"form\" ref=\"form\" label-width=\"80px\">\r\n                <el-form-item label=\"昵称：\">\r\n                    <el-input v-model=\"form.nickname\" class=\"nickname\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"头像：\">\r\n                    <el-upload\r\n                        class=\"avatar-uploader\"\r\n                        action=\"http://127.0.0.1:3000/api/user/upload\"\r\n                        :show-file-list=\"false\"\r\n                        :on-success=\"handleAvatarSuccess\"\r\n                        :before-upload=\"beforeAvatarUpload\"\r\n                        name=\"head_img\">\r\n                        <img v-lazy=\"imageUrl!=null?imageUrl:imgDefault\" class=\"avatar\">\r\n                    </el-upload>\r\n                    <p class=\"tips\">tips:请上传2M以内JPG/PNG格式的图片，比例最好1:1</p>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"save()\">保存</el-button>\r\n                    <el-button @click=\"signOut()\">退出登录</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n            \r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import imgDefault from '@/assets/logo.jpg'\r\n    import Cookie from 'js-cookie'\r\n\r\n    export default {\r\n        name:'Personal',\r\n        data() {\r\n            return {\r\n                form: {\r\n                    nickname: this.nickname\r\n                },\r\n                imageUrl: null,\r\n                imgDefault: imgDefault,\r\n                \r\n            }\r\n        },\r\n        methods: {\r\n            //\r\n            upUserList(){\r\n                this.$axios.post('/api/userList/upUserList',{\r\n                    nickname: this.form.nickname,\r\n                    head_img: this.imageUrl\r\n                })\r\n            },\r\n            // 更新用户信息\r\n            save() {\r\n                this.$axios.post('/api/user/updateUser', {\r\n                    nickname: this.form.nickname,\r\n                    head_img: this.imageUrl\r\n                }).then(res => {\r\n                    this.upUserList();\r\n                    if (res.data.code === 0) {\r\n                        this.$message({\r\n                            message: '更新成功',\r\n                            type: 'success'\r\n                        });\r\n                        setTimeout(() => {\r\n                            location.reload()\r\n                        }, 800)\r\n                    }\r\n                }).catch(e => {\r\n                    console.log(e)\r\n                })\r\n            },\r\n            handleAvatarSuccess(res) {\r\n                this.imageUrl = res.data\r\n            },\r\n            beforeAvatarUpload(file) {\r\n                const isJPG = file.type === 'image/jpeg';\r\n                const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n                if (!isJPG) {\r\n                    this.$message.error('上传头像图片只能是 JPG 格式!');\r\n                }\r\n                if (!isLt2M) {\r\n                    this.$message.error('上传头像图片大小不能超过 2MB!');\r\n                }\r\n                return isJPG && isLt2M;\r\n            },\r\n            // 获取用户信息\r\n            getUserInfo() {\r\n                this.$axios.get('/api/user/info').then((res) => {\r\n                    let result = res.data\r\n                    if (result.code === 0) {\r\n                        this.form.nickname = result.data.nickname\r\n                        if (result.data.head_img === '' || result.data.head_img === null) {\r\n                            this.imageUrl = null\r\n                            // this.imggeUrl = '../assets/img/head_img.jpg'\r\n                        } else {\r\n                            this.imageUrl = result.data.head_img\r\n                        }\r\n                    }\r\n                }).catch(e => {\r\n                    console.log(e)\r\n                })\r\n            },\r\n            // 退出登录按钮\r\n            signOut() {\r\n                Cookie.remove('token')\r\n                // this.$store.commit('token/setToken', '')\r\n                // this.$store.commit('token/changIsSignIn', 0)\r\n                this.$store.commit('tokens/SETTOKEN', '')\r\n                this.$store.commit('tokens/ISSIGNIN', 0)\r\n                this.$router.push({\r\n                    name: 'home'\r\n                })\r\n            }\r\n        },\r\n        created() {\r\n            this.getUserInfo()\r\n        }\r\n\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .wrapper {\r\n        // min-height: calc(100vh - 200px);\r\n        min-height: 100vh;\r\n        color: #e6e6ea;\r\n        .content {\r\n            // width: 40%;\r\n            width: 480px;\r\n            height: 380px;\r\n            margin: 60px auto auto auto;\r\n            padding: 50px 0;\r\n            border-radius: 10px;\r\n            backdrop-filter: blur(50px);\r\n        }\r\n    }\r\n    ::v-deep .el-form-item__label{\r\n        color: rgba(250, 250, 250, 1) !important;\r\n    }\r\n    .nickname {\r\n        width: 70%;\r\n    }\r\n    \r\n    .avatar-uploader {\r\n        .el-upload {\r\n            border: 1px dashed #d9d9d9;\r\n            border-radius: 6px;\r\n            cursor: pointer;\r\n            position: relative;\r\n            overflow: hidden;\r\n            &:hover {\r\n                border-color: #409EFF;\r\n            }\r\n        }\r\n        .avatar-uploader-icon {\r\n            font-size: 28px;\r\n            color: #8c939d;\r\n            width: 100px;\r\n            height: 100px;\r\n            line-height: 100px;\r\n            text-align: center;\r\n        }\r\n        .avatar {\r\n            width: 100px;\r\n            height: 100px;\r\n            display: block;\r\n        }\r\n    }\r\n    \r\n    .tips {\r\n        font-size: 12px;\r\n        color: #e6e6ea;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Personal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Personal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Personal.vue?vue&type=template&id=c972ef18&scoped=true&\"\nimport script from \"./Personal.vue?vue&type=script&lang=js&\"\nexport * from \"./Personal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Personal.vue?vue&type=style&index=0&id=c972ef18&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c972ef18\",\n  null\n  \n)\n\nexport default component.exports","module.exports = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYQBhAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCADIAMgDASIAAhEBAxEB/8QAHQABAAICAwEBAAAAAAAAAAAAAAUGBwgBAwQCCf/EAEIQAAEDAwEEBgYGBgsAAAAAAAABAgMEBREGBxIhMRNBUWFxoQgiQoGRwRQyUoKSsRUkVHKisiM0NVNjc6PC0eHi/8QAGwEBAAIDAQEAAAAAAAAAAAAAAAEFAgQGAwf/xAA0EQEAAgIBAQUCDAcAAAAAAAAAAQIDBBEFBhIhMVFhwRMUIjIzQUKBkaGx8BUjNFJx0eH/2gAMAwEAAhEDEQA/AM4HIBdPl4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEta7ZHU0TpJVcjnKqMVF5InWROFVUROarhC400SQwRxpyY1ENbZyTWIiF70PTpnva+SOYiP1VOrppKWZY5E49SpyVDqLZcaRtXTq1cI9OLXdikIyz1bvrJGzxd/wTi2Imvyp8WO90bLiy8YKzas/kjgS7bHLn15o0TuRVPttiXrqPgz/synZx+rxjo25P2Pzj/aFBO/oFn7Q78KHC2FuPVqFRe9o+NY/Vl/BNz+2PxhBgmXWJ6J6tQ1V724Op9kqUT1XRO96oTGxjn63nbpG5X7H6IyON8sjWRtVz3ckQmX2ZrKF65V1Qib2c8PA9Vnt60savlROmdw7d1OwkzVzbEzbinkvOndGpXFNs8c2n8v8AqkA7q2HoKyaPqR3Dw5odJvVnvRy5PLjnHeaW84ngABLAAAAAAAAAAPmR7Y2Oe9UaxqK5zlXCIic1UD6BTqraboqlyk2pbaqp1RydJ/KikTUbatCw5xd3y/5dLKv5tQxnJWPOWzXT2LeVJ/CWUrVH0lxhReSLvfAthgO1bfdDU075HTXKT1d1Nyid81JVPSP0Kq8runf9D/8ARXbF4tfwdj0XWtr6/F44mZ5ZoBiWj9ILZ/UORJbjV0yds1FIieSKWi0bT9EXd6ModT2pz15NknSJ3wfhTwWy5A66eohqYmy08rJY3cnxuRyL70OwAAAAGSKu+pLJZkVbtd7fRY/aKhka/BVAlDkxvcdt2z6hyjtQwzuT2aaKSXza3HmQkvpF6EYqo2S6Sd7aJ3zVAMgajj3KqORE4Pbj4EUY/vHpB6HrIWbq3VjmOzl1GvJfBSPh25aIkXDq2sj730b/AJZLDBlrFIiZcb1bQzW2bXx0mYn0ZQBQqXa7oWoXDdQU8a/4sUjPNWllsWprJqDpEsl1o65Y0Rz2wSo5WovJVTmhsRes+Uqe+tmxxzekx90pgAGTxAAAAAAgNfVH0TRGoJ84WO3zqi9+4uCfI/UFppr7Za211yyJTVcSwydG7ddur2L1ET5eDPFMReJt5ctBG8GonYhyZg2ubIItGWVbzbLlJU0aTNikhqGIj2b3BFRycFTPPghh8qb0mk8S+ja+zj2afCYp5h6adMR57TvOuJMRtTuOwxlsQ+QvHnx8QAhIWq7XK0SpLabhWUMie1TTOjX+FUMg6c2667su5G+6MuUDfYr4kkVfvph3mYuAGylD6UVS2DFdpWKSb7UNarW/BWKvmQd+9JjU9YxzLPbLdbUXlI/eqHp8cN8lMU6b0bqLU9LV1NgtFVXQUiZmfEiYauM4TKpl2OOEypAKnFcoqL3gWu/bR9Y3/fS6ajuUkbucUcvRM/CzCFUd67993rP63LxX4nDT5A5ycACR8yJljk7jxnuPE5MOVOwgcGZPRaqFj15cIc4Sa3u96tkYvzUxdpezT6i1Fb7RSvZHNWTJE17/AKrc81XwRFNrNm2yS16JuSXOKvrK24dE6LeejWRo12M4anHq61NjXpabRaPqVHWNrFjwWxXnxtHgyWACz4cPwAAcHAACEAAAxt6Q8XS7Kbsv92+B/wDqtT5mn3NTdbbPTfS9lupI0TKtpVkT7rkd8jSyJMyt8Sv2/nw7Hs9bnXtHt90PWgANVfgAADKJxXknEExo+zP1Fqq0WeJFV1bVRwr3NVfWX3NyvuA3g2H2Fun9lun6Xomxzy06VU2E4rJJ66qvfhUT3GsPpL6Zh05tMnko40jpbpCla1rU4JIqq2TH3kz943XgjZDEyOJqNjY1GtROSInBDX/0wrEtTpizXyJiK6hqVp5VTnuSpw/ian4gNUGnyAAAAA8kyYkces89SnrovcBddhkPT7V9Ptxndle/4RvU3PTkaiejfTdPtSpJMZSnpp5fD1d3/cbdljqfMcb2htzsxHs98gANpRAAAAAhAAAPDfKBl0s1fb5VRGVdPJAqr1I5qpnzNEqu3VFqutTQV0ax1VK90UjF6nIuFN+zH+0XY9S6+ZPcbdLHQ36JrWpK9F6OoTjhsmOKKnU5OKdeUNXapzXvejoOgbU0yzh48Le5qGCzat0NqPSNQ6O/2ippmIuEnRu/C/vSRPV/JSsouUyi5TuK92AAOrPUAM+eiRpR9w1bWajnjX6LbI1hhcqcHTyJhcfusz+JDH2zHZlftfXCNtDA+mtaO/p7hKxejYnWjftu7k96obv6O01bdI6epLNZoejpaduMrxdI5eLnuXrcq8VUCaK7tD05HqzRd3skmEWrgc2Ny+zInFi+5yIWIAfmlVU01JVTU1VE6Kohe6OWNyYVjmrhUXwVDoNttv8AsXk1JNJqPScTP0uqZqqNFRqVWE+u1eSSY7frePPVKtpKihq5KWtglp6qJd18MrFY9q9iovFAPMDkYA4OmqTg1T100EtVO2GliknmcuGxxNV7lXuROJlvROwfUF5jjrtSxSWe1I5FVkn9ZlTsRvseLuPcTEczxDDJkjHSb28o8Uj6K1gm+lXe/wAsatg6NKKBy+07KOfjww1PebFnhstso7La6a3WyBlPR07EZHGxOCJ8161XrU9xbYsfcrEPnu/tfGs85f3wAA9GpyAAHIACAAAAsGnI/wBVld9p/wCSFfLPYWo22xqnDeVV8zW2p4pwvOz9O9tTPpE+573xskY5kjUcxyYVqplFTwKjedmWirw9X1+mbW+Reb2QJG5fezClwBXO0Ysm2B7PJH7yWWWPuZWTIn8xJ2fY5oK0yslptN0kkreKOqVdP5PVU8jIAA+IYo4ImxQsbHGxMNY1MI1OxETkRuqY7tLYK1unZqeG7bmad9Q3ej3kVFw5OxUymerJKgDEV7tOuNoDKe3XamXSdtp2rJPLT1iTSVM6J6m7u8o0X1uK5JC3Ve0p7rZaai12+nWnlYlbeXVDZY6iJq8VZFwcjnInHPJTJoAEHqTSVg1NGjL9aKGvwmEdPEjnN8Hc09yk4AMWz7Bdnk0ivSyPiz7MdXMifDePXQ7EdntGqKzTkErk655pJfJzsGRwBGWbT9oskfR2e2UVCzGMU0DY8+OEO68M3rbOiIvLPDuU9p01bN+mlb9pip5E1niYl5Zqd/HavrEqaAnIF1D5pIAAgAAAAEJAAALbbG7lBTon2EKipdoG7kTG9jUQ09yfCIdL2cr8rJb/AA+wAaLqwAAAAAAAAAAAAAC8UwABSHJuyOb2KqHB3Vzd2vqE7JFOkuaTzES+Z569zLavpMgAMnkAAAACEgAA5Ym9IxO1yJ5l3QptEma2BOvpE/MuRo7nnDrezlf5V7e0ABpujAAAAAAAAAAAAAAAAVK7tRtznx1qi+SHkJC/Ji5uXtaikeW+GeaQ+d9Rr3drJHtkAB6NIAAAAEJAAB6rW3euNOidT8luKpZUzc4e7K+SlqK/b+fDsuz0ca0z7fdDkAGqvgAAAAAAAAAAAAAAAFb1Gn66xepY0/NSLJfUrcVEC9W4qeZEFrr/AEcOA6vHG5f9/VAAD2VoAAAAISAACQsX9pM/dcpaACt2/pHbdB/pPvkABrroAAAAAAAAAAAAAAABA6n+tT/e+RCgFprfRw4Trccblvu/QAB7qkAAH//Z\""],"sourceRoot":""}